---
title: "Final Doc Research"
author: "Gabrielle Salamanca"
date: "June 1, 2023"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

### Libraries 

```{r library}
library(dplyr)
library(psych)
library(readr)
library(readxl)
library(tidyr)
```

### Dataset Reading

```{r dataset}
C19vj <- read_csv("D:/Coding/R Storage/Summer TCR Project/TCR Datasets/dt.COVID_TCR.vjGene.p.csv",
                  show_col_types = FALSE)
vj <- read_csv("D:/Coding/R Storage/Summer TCR Project/TCR Datasets/dt.HD_TCR.vjGene.p.csv",
               show_col_types = FALSE)
patients <- read_excel("D:/Coding/R Storage/Summer TCR Project/TCR Datasets/dt.info_edited.xlsx")
```

### Summary of each dataset

Summary of C19vj:

```{r}
C19vj <- C19vj %>% 
  mutate_at(c('vjGene'), as.factor)
summary(C19vj)
```

Summary of vj:

```{r}
vj <- vj %>% 
  mutate_at(c('vjGene'), as.factor)
summary(vj)
```

Summary of patients as factor:

```{r}
patients <- patients %>% 
  mutate_at(c('Sample.ID', 'diseae.stage', 'days.from.first.symptoms', 
              'patient.ID', 'time', 'choose', '...7', 'comment'), 
            as.factor)
summary(patients)
```

### New dataset

Combined all three into one dataset called genes

```{r}
genes <- read_excel("D:/Coding/R Storage/Summer TCR Project/TCR Datasets/fullgenes.xlsx")
```

C19vj and vj were first merged by the column vjGene, the dataset being named combine. Because of the multiple NAs in the value column, we replaced them with $1e^{-7}$. Then, we needed to rename to columns to match the Sample.ID column in patients. Next, we can use pivot_longer to log transform and standardize them. Finally, we can pivot_wider to make the dataset look like this:

| Patient | VJ1 | VJ2 |    Y    |   Y1   |
|:-------:|:---:|:---:|:-------:|:------:|
|  Pat 1  | ... | ... |    HD   |   HD   |
|  Pat 2  | ... | ... | Disease | Active |

There are NAs in terms of patients. For example, the healthy patients doesn't extend all the way to 39, it ended at 23. But they were kept in instead of removed, with the idea that it'll be done later down the line.

```{r, ref.label=knitr::all_labels(), echo = TRUE, eval = FALSE}
```
